<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Faraz Samie | Experience Page</title>
    <link rel="icon" href="images/icon.png" type="image/png">
    <link rel="stylesheet" href="experience.css"/>
    <!-- Load GSAP animation library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/CustomEase.min.js"></script>
</head>

<body>
    <div class="container">
        <nav>
            <a href="index.html" id="logo">Home</a>
            <a href="resume.html">Resume</a>
        </nav>

        <footer>
            <h2 id="title">EXPERIENCE</h2>
            <p>Faraz Samie 2025</p>
        </footer>

        <div class="slides"></div> <!-- Slide container -->
        <div class="slider-nav"></div> <!-- Navigation container -->
        <div class="slide-title"></div> <!-- Contains both title and subtitle -->
        <div class="slide-description"></div> <!-- Text description area -->
        <div class="slide-image"></div> 
        <div class="bg-overlay"></div>  <!-- Background overlay for color transition -->
    </div>

    <svg style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 1000;">
        <circle class="trail" cx="0" cy="0" r="15" style="stroke: #2926244d; fill: #2926244d;"></circle>
    </svg>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            gsap.registerPlugin(CustomEase);
            CustomEase.create("hop", "M0,0 C0.071,0.505 0.192,0.726 0.318,0.852 0.45,0.984 0.504,1 1,1");

            const titles = [
                ["Undergraduate Research Assistant", "UC San Diego", "Analyzed performance metrics and created dashboards for the basketball team."],
                ["Risk Management", "Hedge Fund UCSD", "Developed an interactive resume website showcasing coding projects."],
                ["Private Equity Intern", "Indus", "Developed an interactive resume website showcasing coding projects."]
            ];

            const sliderNav = document.querySelector(".slider-nav");
            const slidesContainer = document.querySelector(".slides");
            const bgOverlay = document.querySelector(".bg-overlay");
            const slideTitle = document.querySelector(".slide-title");
            const slideDescription = document.querySelector(".slide-description");

            let currentIndex = 0;
            const ANIMATION_DURATION = 1.5;
            const LETTER_STAGGER_DELAY = 0.125;

            function updateTitle(newIndex, color) {
                const title = titles[newIndex];
                slideTitle.innerHTML = "";
                slideDescription.innerHTML = "";

                // Title Animation
                const titleRow = document.createElement("div");
                titleRow.classList.add("slide-title-row", "title");

                title[0].split(" ").forEach((word) => {
                    const wordDiv = document.createElement("div");
                    wordDiv.classList.add("word");

                    word.split("").forEach((char, letterIndex) => {
                        const letter = document.createElement("div");
                        letter.classList.add("letter");

                        const newSpan = document.createElement("span");
                        const direction = newIndex > currentIndex ? 150 : -150;

                        gsap.set(newSpan, { x: direction, color: color });
                        newSpan.textContent = char;
                        letter.appendChild(newSpan);
                        wordDiv.appendChild(letter);

                        gsap.to(newSpan, {
                            x: 0,
                            duration: 1,
                            ease: "hop",
                            delay: letterIndex * LETTER_STAGGER_DELAY
                        });
                    });

                    titleRow.appendChild(wordDiv);
                });

                slideTitle.appendChild(titleRow);

                // Subtitle Animation
                const subtitleRow = document.createElement("div");
                subtitleRow.classList.add("slide-title-row", "subtitle");

                title[1].split(" ").forEach((word) => {
                    const wordDiv = document.createElement("div");
                    wordDiv.classList.add("word");

                    word.split("").forEach((char, letterIndex) => {
                        const letter = document.createElement("div");
                        letter.classList.add("letter");

                        const newSpan = document.createElement("span");
                        const direction = newIndex > currentIndex ? 150 : -150;

                        gsap.set(newSpan, { x: direction, color: color });
                        newSpan.textContent = char;
                        letter.appendChild(newSpan);
                        wordDiv.appendChild(letter);

                        gsap.to(newSpan, {
                            x: 0,
                            duration: 1,
                            ease: "hop",
                            delay: letterIndex * LETTER_STAGGER_DELAY
                        });
                    });

                    subtitleRow.appendChild(wordDiv);
                });

                slideTitle.appendChild(subtitleRow);

                // Description
                const description = document.createElement("p");
                description.textContent = title[2];
                slideDescription.appendChild(description);
            }

            function createSlidesAndNav() {
                titles.forEach((_, i) => {
                    const navItemWrapper = document.createElement("div");
                    navItemWrapper.classList.add("nav-item-wrapper");
                    if (i === 0) navItemWrapper.classList.add("active");

                    const navItem = document.createElement("div");
                    navItem.classList.add("nav-item");

                    navItemWrapper.appendChild(navItem);
                    sliderNav.appendChild(navItemWrapper);
                    navItemWrapper.addEventListener("click", () => handleNavClick(i));

                    const slide = document.createElement("div");
                    slide.classList.add("slide");
                    if (i === 0) slide.classList.add("active");
                    slidesContainer.appendChild(slide);
                });
            }

            function handleNavClick(index) {
                document.querySelectorAll(".nav-item-wrapper").forEach((nav) => nav.classList.remove("active"));
                document.querySelectorAll(".nav-item-wrapper")[index].classList.add("active");

                gsap.to(slidesContainer, {
                    x: `${-index * 100}vw`,
                    duration: ANIMATION_DURATION,
                    ease: "hop"
                });

                const newColor = getRandomColor();
                gsap.to(bgOverlay, {
                    backgroundColor: newColor,
                    duration: ANIMATION_DURATION,
                    ease: "hop"
                });

                updateTitle(index, newColor);
                currentIndex = index;
            }

            createSlidesAndNav();
            updateTitle(0, getRandomColor());

            function getRandomColor() {
                return `#${Math.random().toString(16).slice(2, 8).padEnd(6, "0")}`;
            }
        });

        // Mouse trail effect
        document.addEventListener("DOMContentLoaded", function () {
            const trail = document.querySelector(".trail");
            const smoothPointer = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
            const pointerSpeed = 0.4;

            setTimeout(() => {
                window.addEventListener("mousemove", (event) => {
                    smoothPointer.x += (event.clientX - smoothPointer.x) * pointerSpeed;
                    smoothPointer.y += (event.clientY - smoothPointer.y) * pointerSpeed;
                });

                function updateTrail() {
                    trail.setAttribute("cx", smoothPointer.x);
                    trail.setAttribute("cy", smoothPointer.y);
                    requestAnimationFrame(updateTrail);
                }
                updateTrail();
            }, 1);
        });
    </script>
</body>
</html>
